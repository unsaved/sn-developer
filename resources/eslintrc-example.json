/* This is intended for a project with different directories for different source script types.
 * ".eslintrc.json" files in cascade directories have branch-specific overrides for what is here.
 * If your scripts are in a flat hierarchy, then just move this file into that directory
 * along-side the scripts and add each file not getting the default config into one of the
 * "files" lists below. */
{
  "root": true,
  // To minimize duplication, we're putting one-directory-specific settings into a cascaded
  // .eslintrc.json file in the leaf directory, including single-dir overrides to what is here.
  // Configs covering multple src/main/sn/ subdirectories go here.
  "overrides": [
    { // Backend scripts
      "files": [
        "**/sa_pattern_prepost_script/**",
        "**/sys_script_fix/**",
        "**/sys_script_include/**"
      ],
      "plugins": [ "servicenow" ],
      "rules": {
        "no-console": "error",
        "servicenow/minimize-gs-log-print": "warn",
        "servicenow/no-packages-calls": "error"
      },
      "globals": {
        "AdmcUtil": "readonly",
        "global": "readonly",

        "current": "readonly",
        "previous": "readonly",
        "gs": "readonly",
        "GlideServletRequest": "readonly",
        "XMLNode": "readonly",
        "GlideScopedEvaluator": "readonly",
        "GlideTableHierarchy": "readonly",
        "GlidePluginManager": "readonly",
        "GlideOAuthClient": "readonly",
        "GlideOAuthClientRequest": "readonly",
        "GlideOAuthClientResponse": "readonly",
        "GlideOAuthToken": "readonly",
        "GlideRecord": "readonly",
        "RESTResponseV2": "readonly",
        "SOAPMessageV2": "readonly",
        "SOAPResponseV2": "readonly",
        "RESTMessageV2": "readonly",
        "GlideServletResponse": "readonly",
        "GlideElementDescriptor": "readonly",
        "GlideQueryCondition": "readonly",
        "GlideScriptableInputStream": "readonly",
        "TypeResolutionEnvironment": "readonly",
        "ResolverEnvironment": "readonly",
        "GlideRecordSecure": "readonly",
        "XMLDocument2": "readonly",
        "GlideDuration": "readonly",
        "GlideAggregate": "readonly",
        "NotAcceptableError": "readonly",
        "ServiceError": "readonly",
        "UnsupportedMediaTypeError": "readonly",
        "ConflictError": "readonly",
        "NotFoundError": "readonly",
        "BadRequestError": "readonly",
        "GlideSession": "readonly",
        "GlideSystem": "readonly",
        "GlideFilter": "readonly",
        "GlideDate": "readonly",
        "ImportSetTable": "readonly",
        "CSVParser": "readonly",
        "ScriptParseResult": "readonly",
        "GlideScriptedProcessor": "readonly",
        "WSSoapRequestDocument": "readonly",
        "RESTAPIResponseStream": "readonly",
        "RESTAPIResponse": "readonly",
        "WSRequest": "readonly",
        "WSResponse": "readonly",
        "WSSoapRequestXML": "readonly",
        "RESTAPIRequest": "readonly",
        "RESTAPIRequestBody": "readonly",
        "GlideTime": "readonly",
        "GlideUser": "readonly",
        "GlideSchedule": "readonly",
        "GlideElement": "readonly",
        "GlideDateTime": "readonly",
        "GlideDBFunctionBuilder": "readonly",
        "TransformResult": "readonly",
        "Transformer": "readonly",
        "DataBuilder": "readonly",
        "TransformPart": "readonly",
        "Data": "readonly",
        "Client": "readonly",
        "GlideLocale": "readonly",
        "XMLNodeIterator": "readonly",
        "GlideEmailAction": "readonly",
        "GlideChoiceList": "readonly",
        "TableUtils": "readonly"
      }
    },
    { // Client scripts
      "files": [
        "**/sys_script_client/**",
        "**/catalog_script_client/**"
      ],
      // sys_client_scripts will have to notate function definitions for
      // onLoad, onCellEditr, onChange, onSubmit as 
      "globals": {
        "AdmcUtil": "readonly",
        "spUtil": "readonly",
        "g_navigation": "readonly",
        "g_form": "readonly",
        "g_list": "readonly",
        "g_user": "readonly"
      },
      "rules": {
        // This is to facilitate implementing onX methods that you must implement
        // and that are called by the platform.
        // With this set to either warn or error, developers should annotate these
        // function definitions with an eslint-disable* comment.
        "no-unused-vars": "warn"
      },
      "env": {
        "browser": true,
        "es2021": true
      },
      "extends": "eslint:recommended",
      "parserOptions": { "exmaVersion": "latest" }
    },
    { // MID scripts
      // I think MID runs Rhino.  Definitely don't have ES6 nor a browser environment.
      "files": [
        "**/ecc_agent_script_include/**"
      ],
      "plugins": [ "servicenow" ],
      "rules": {
        "no-console": "error"
      },
      "globals": {
        "Packages": "readonly",
        "Class": "readonly",
        "CTX": "readonly",
        "DuplicateRemover": "readonly",
        "AdmcUtil": "readonly",
        "MidExec": "readonly"
      }
    }
    // Don't have any yet for this project, but sys_ui_action.script can have both
    // server-side and client-side scripting.  Handle with an .eslintrc.json file in that dir.
  ],
  "rules": {
    // Integrator TODO:  Consider raising most of the "warn"s to "error"s.
    "curly": "off",
    "quotes": "off",
    "no-undef": "error",
    "no-const-assign": "error",

    "max-len": ["warn", { "code": 100, "ignoreUrls": true }],
    "no-tabs": "warn",
    "no-mixed-spaces-and-tabs": "warn",
    "no-trailing-spaces": "warn",

    "servicenow/no-hardcoded-sysids": "error",
    "servicenow/dont-use-gr-as-variablename": "off",
    "camelcase": "warn",
    "eqeqeq": "warn",
    "constructor-super": "warn",
    "no-case-declarations": "warn",
    "no-class-assign": "warn",
    "no-compare-neg-zero": "warn",
    "no-cond-assign": "warn",
    "no-constant-condition": "warn",
    "no-control-regex": "warn",
    "no-debugger": "warn",
    "no-delete-var": "warn",
    "no-dupe-args": "error",
    "no-dupe-class-members": "error",
    "no-dupe-keys": "error",
    "no-duplicate-case": "warn",
    "no-empty-character-class": "warn",
    "no-empty-pattern": "warn",
    "linebreak-style": "off",
    "no-empty": [ "warn", { "allowEmptyCatch": true } ],
    "no-ex-assign": "warn",
    "no-extra-boolean-cast": "error",
    "no-extra-semi": "error",
    "semi": "warn",
    "no-fallthrough": "warn",
    "no-func-assign": "warn",
    "no-global-assign": "warn",
    "no-inner-declarations": "warn",
    "no-invalid-regexp": "error",
    "no-irregular-whitespace": "warn",
    "no-new-symbol": "warn",
    "no-obj-calls": "warn",
    "no-octal": "warn",
    "no-redeclare": "warn",
    "no-regex-spaces": "warn",
    "no-self-assign": "warn",
    "no-sparse-arrays": "warn",
    "no-this-before-super": "warn",
    "no-unexpected-multiline": "warn",
    "no-unreachable": "warn",
    "no-unsafe-finally": "warn",
    "no-unsafe-negation": "warn",
    "no-unused-labels": "error",
    "no-unused-vars": "error",
    "no-useless-escape": "error",
    "require-yield": "warn",
    "use-isnan": "warn",
    "valid-typeof": "warn",
    "no-use-before-define": "warn"
  }
}
